# 🚨 AI 기반 장애 대응 상황창 어시스턴트

> **실시간 대화 요약 + 중간보고 자동 생성으로 장애 대응 효율을 극대화하는 AI 어시스턴트**

---

## 📘 프로젝트 개요

AI 기반 장애 대응 상황창 어시스턴트는 **시스템 장애 발생 시**, 단체 채팅방(상황창)에서 주고받는 메시지를 실시간 분석하여  **AI가 자동으로 중간보고 문장과 핵심 내용**을 제안하는 지원 도구입니다.

> 💡 *"AI가 대신 매뉴얼 양식에 맞춰 중간보고를 작성해드립니다!"*

### 🔹 문제 정의
장애 대응 과정에서 담당자는 **장애 조치와 동시에 상황창(단체 채팅방)에 보고해야 하는 이중 업무 부담**을 겪습니다.  
매번 매뉴얼 형식에 맞춰 보고문을 작성하는 과정은 시간 소모적이며, 보고 품질의 일관성도 확보하기 어렵습니다.  

### 🔹 대상 사용자
- IT 서비스 운영팀 / 장애 대응팀  
- 클라우드 서비스, 네트워크 등 시스템 운영 관리자  
- 장애 대응 보고 자동화를 도입하고자 하는 기업  

### 🔹 솔루션 개요
본 시스템은 **LangChain + Azure OpenAI 기반의 RAG(Retrieval-Augmented Generation) 구조**로 설계되어,  
상황창 메시지를 실시간 요약하고, 매뉴얼 템플릿에 맞춰 자동으로 **중간보고 / 최종보고 문장**을 생성합니다.  
또한 로그 관리 기능을 통해 장애 대응 기록을 자동 저장하고, 향후 보고서 분석에도 활용할 수 있습니다.


### 🎯 주요 기능
- 실시간 **상황 메시지 요약**
- 장애 매뉴얼 기반 **중간보고 자동 생성**
- 보고서 템플릿 일관성 확보 및 보고 품질 향상

### 🚀 기대 효과
- 보고 문장 자동 생성으로 **보고 시간 단축**
- **장애 대응 일관성** 확보
- **보고 품질 향상** 및 담당자 부담 감소

---

## 🧩 전체 아키텍처 개요

아래는 AI 기반 장애 대응 상황창 어시스턴트의 전체 시스템 구성입니다.

```text
┌────────────────────────────────────────────────────────┐
│                      Frontend/UI                       │
│                    (Streamlit 기반)                    │
│         ─ 사용자 입력 및 상황 메시지 실시간 시각화 ─      │
└──────────────────────────────┬─────────────────────────┘
                               │
                               ▼
┌────────────────────────────────────────────────────────┐
│                      Backend                           │
│              (Python + LangChain Orchestrator)         │
│        ─ 텍스트 전처리 / 보고유형 분류 / 로그저장    ─    │
└──────────────────────────────┬─────────────────────────┘
                               │
                               ▼
┌────────────────────────────────────────────────────────┐
│                  LLM Core(Azure Services)              │
│                🔹 Azure OpenAI (LLM Core)              │
│       ─ 상황 요약 / 장애 원인 추론 / 보고문 자동 생성 ─   │
└──────────────────────────────┬─────────────────────────┘
                               │
                               ▼
┌────────────────────────────────────────────────────────┐
│                    Retrieval Layer                     │
│             (Azure AI Search + LangChain)              │
│              🔹 Azure AI Search (매뉴얼 검색)           │
│      ─ 장애 매뉴얼·템플릿 문서 벡터 검색 및 문맥 연결 ─    │
└──────────────────────────────┬─────────────────────────┘
                               │
                               ▼
┌────────────────────────────────────────────────────────┐
│                        Storage                         │
│                 🔹 Azure Blob Storage                  │
│        장애 이력(json) 로컬 저장 중 향후  이전 예정       │
│          ─ 장애 대응 로그, 매뉴얼, 보고 결과 저장 ─       │
└────────────────────────────────────────────────────────┘

```
---


### ⚙️ 구성 요소

| 구성 요소 | 기술 스택 | 설명 |
|-----|----|------------|
| 🎨 **Frontend/UI** | Streamlit | 실시간 상황 메시지 입력 및 결과 표시 |
| 🧠 **LLM Core** | Azure OpenAI (GPT-4o-mini)  | 장애 원인 분석 및 보고문 생성 | 
| 🔍 **Retrieval Layer** | Azure AI Search | 장애 매뉴얼, 템플릿 문서 임베딩, RAG 컨텍스트 |
| 🔗 **Orchestration** | LangChain | Retrieval, Prompt 구성, LLM 호출 오케스트레이션 |
| 💾 **Storage** | **Local JSON → Azure Blob Storage(예정)** | 장애 이력 및 로그 저장/관리 |
| ⚙️ **Backend API** | Python 기반 서비스 로직 |

 ---

### 🔹 커스텀 프롬프트 엔지니어링
- **보고 유형 자동 분류**  
  사용자 메시지 내 “복구 완료”, “정상화” 등의 키워드를 기반으로 `중간보고 / 최종보고` 자동 판단  
- **장애 매뉴얼 RAG 검색**  
  `incident_manual.json`을 Azure Cognitive Search 인덱스로 구성하여, 장애 대응 매뉴얼 내용 검색 후 컨텍스트 제공  
- **템플릿 기반 보고 생성**  
  `incident_template.txt` 구조에 따라 LLM이 보고문을 자동 완성  

---

## 🛠️ 개발 순서

### 🔹 Step 1. Azure 리소스 준비
- Azure OpenAI, AI Search, Blob Storage 리소스 생성
- API Key 및 Endpoint 환경변수 설정 (.env)

### 🔹 Step 2. VS Code 개발 환경 세팅
- Python 3.10+ 환경 구축  
- 필수 라이브러리 설치

### 🔹 Step 3. 장애 매뉴얼 문서 벡터 인덱싱
- 장애 매뉴얼 문서(JSON) 업로드
- Azure AI Search에 인덱스 생성
- LangChain으로 문서 임베딩 후 인덱스 업로드

### 🔹 Step 4. LangChain으로 “상황창 메시지 요약 + 보고문 자동 생성” 체인 구성
- Chat 메시지 스트림 감지 → 핵심 내용 요약
- 템플릿 기반 중간보고 자동 완성


---

### 🔹 기능적/기술적 구현 요약
| 구분 | 구현 내용 | 설계 의도 |
|------|------------|------------|
| 🧠 보고유형 자동 분류 | 메시지 문맥 분석 후 `중간보고` 또는 `최종보고`로 자동 라벨링 | 보고서 작성 자동화 |
| 📁 장애 이력 / 로그 저장 | 모든 대화를 JSON 형식으로 `/logs/incident_history.json` 에 저장 | 로컬 관리 후 Blob Storage로 이전 예정 |
| 📋 매뉴얼 기반 보고서 생성 | Azure Search에서 검색된 매뉴얼(JSON 인덱스) 기반으로 보고문 생성 | 매뉴얼 일관성 유지 |
| 🪶 LangChain 에이전트 설계 | Prompt → Retriever → LLM 체인 구성 | 장애 맥락 기반 자동 응답 |

---

## 🔮 향후 개선 및 확장 계획

| 개선 항목 | 설명 |
|------------|------|
| 💬 **실제 메신저 연동** | Slack, Microsoft Teams 등 실제 상황창과 API 연동을 통해 실시간 메시지 자동 수집/응답 |
| 🧩 **다국어 대응** | 영문/일문 보고 자동 변환 기능 추가 (Azure Translator 연계) |
| 📊 **대시보드 시각화** | Streamlit 또는 Power BI 기반 장애 발생 패턴 분석 |
| 🧠 **Fine-tuning / Custom Model** | 자사 장애 데이터셋을 활용한 LLM 파인튜닝 및 도메인 성능 최적화 |
| 🔁 **LangSmith / Prompt Optimization** | 모델 응답 품질 추적 및 프롬프트 개선 자동화 |
